<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.8.0/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.2/dist/browser/index.js"></script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"0003. vite-plugin-mock 的基本使用","children":[{"content":"markmap","children":[{"content":"<img src=\"md-imgs/markmap.png\" alt=\"\">","children":[]}],"payload":{"lines":"2,3"}},{"content":"📝 summary","children":[{"content":"本节内容：vite-plugin-mock 的基本使用。","children":[],"payload":{"lines":"9,10"}},{"content":"在 Vite 中使用 mock 数据是一个非常实用的功能，如果跟负责写后端的朋友接口还没写好，前端可以自行根据接口文档的要求来 mock 数据。做法很简单，在下面的 demo 中记录基本流程。","children":[],"payload":{"lines":"10,12"}}],"payload":{"lines":"7,8","fold":2}},{"content":"🔗 links","children":[{"content":"https://www.npmjs.com/package/vite-plugin-mock","children":[{"content":"NPM，vite-plugin-mock。","children":[],"payload":{"lines":"15,16"}}],"payload":{"lines":"14,16"}},{"content":"https://github.com/vbenjs/vite-plugin-mock/tree/main#readme","children":[{"content":"Github，vite-plugin-mock。介绍了该插件的基本使用，以及一些字段的描述。","children":[],"payload":{"lines":"17,19"}}],"payload":{"lines":"16,19"}}],"payload":{"lines":"12,13"}},{"content":"💻 demo","children":[{"content":"<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># 初始化包，并安装必要的依赖</span>\n\n<span class=\"hljs-comment\"># 初始化包</span>\n$ pnpm init\n<span class=\"hljs-comment\"># 安装必要的依赖</span>\n$ pnpm install vite-plugin-mock vite mock @types/node\n\n<span class=\"hljs-comment\"># vite-plugin-mock 一个可以帮助你拦截网络请求并提供模拟数据的库。</span>\n<span class=\"hljs-comment\"># vite 构建工具</span>\n<span class=\"hljs-comment\"># mock 模拟数据的库</span>\n<span class=\"hljs-comment\"># @types/node 这是 nodejs 环境下的一些类型声明文件</span>\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"name\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"vite-mock-demo\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"version\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"1.0.0\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"description\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"main\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"index.js\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"scripts\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"test\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"keywords\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"author\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"license\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"ISC\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"dependencies\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"@types/node\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^20.14.6\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"mock\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^0.1.1\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"vite\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^5.3.1\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"vite-plugin-mock\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^3.0.2\"</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">import</span> { defineConfig } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'vite'</span>\n<span class=\"hljs-keyword\">import</span> { viteMockServe } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'vite-plugin-mock'</span>\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">defineConfig</span>({\n  <span class=\"hljs-attr\">server</span>: {\n    <span class=\"hljs-attr\">port</span>: <span class=\"hljs-number\">3000</span>, <span class=\"hljs-comment\">// 端口号改为 3000（默认端口是 5173，若端口号冲突了，可以在这里自定义端口）</span>\n    <span class=\"hljs-attr\">open</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-comment\">// 自动打开浏览器</span>\n  },\n  <span class=\"hljs-attr\">plugins</span>: [\n    <span class=\"hljs-title function_\">viteMockServe</span>({\n      <span class=\"hljs-comment\">// 指定存放 mock 文件的文件夹</span>\n      <span class=\"hljs-attr\">mockPath</span>: <span class=\"hljs-string\">'mock'</span>,\n\n      <span class=\"hljs-comment\">// 在开发环境启用 mock 功能</span>\n      <span class=\"hljs-attr\">enable</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> === <span class=\"hljs-string\">'development'</span>,\n    }),\n  ],\n})\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> [\n  {\n    <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">'/api/user'</span>,\n    <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">'get'</span>,\n    <span class=\"hljs-attr\">response</span>: <span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-keyword\">return</span> {\n        <span class=\"hljs-attr\">code</span>: <span class=\"hljs-number\">200</span>,\n        <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">'ok'</span>,\n        <span class=\"hljs-attr\">data</span>: {\n          <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'张三'</span>,\n          <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">25</span>\n        }\n      };\n    }\n  }\n];\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">\"en\"</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">\"UTF-8\"</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"viewport\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>vite-mock-demo<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>测试 mock<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>请求到的数据：<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"mock-data\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n      <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">'/api/user'</span>)\n        .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">res</span>) =&gt;</span> res.<span class=\"hljs-title function_\">json</span>())\n        .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">data</span>) =&gt;</span> {\n          <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(data)\n          <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">'mock-data'</span>).<span class=\"hljs-property\">textContent</span> =\n            <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(data)\n        })\n    </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># 启动你的 Vite 开发服务器</span>\n$ npx vite\n</code></pre>","children":[]}],"payload":{"lines":"19,20"}}],"payload":{"lines":"0,1"}},{"maxWidth":400,"colorFreezeLevel":2,"duration":0,"spacingVertical":20})</script>
</body>
</html>

<style>
body,
#mindmap {
  width: 1920px;
  height: 1080px;
}
</style>
